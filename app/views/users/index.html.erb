<div class ="container">
<nav class="navbar navbar-light bg-dark">

  <div class="container-fluid">
   <%= link_to 'New User', new_user_path ,style:"color:white;text-decoration:none;", data: {bs_toggle:'modal',bs_target: '#newUserModal', remote: true}%>
    <input type="text" id="search" onkeyup = search_user(id) class="form-control" style="width:250px;" placeholder="Search" aria-label="Search" >
    </div>
</nav>

<div id = "address" style="margin-top:20px;">
</div>


<p id="notice"><%= notice %></p>

<% if @users.count > 0 %>
<h1>Users</h1>

<table class="table table-dark table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone no</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.phone_no %></td>
        <td><%= link_to 'Show', user, style:"color:white;text-decoration:none;",
        data: {bs_toggle:'modal',bs_target: '#showUserModal', remote: true}%></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%else%>
<h1>Create a User!!</h1>
<%end%>



<script type="text/javascript">
function search_user(){
  var search_result = document.getElementById('search').value
  if(search_result)
  {
    $('#address').show()
    $.ajax({
      url: "<%= search_path%>",
      data:{'q':search_result}
    })
  }
  else{
   $('#address').hide()
  }
}
</script>


<!-- Modal -->
<div class="modal fade" id="newUserModal" tabindex="-1" aria-labelledby="newUserModalLabel" 
aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newUserModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"
         aria-label="Close"></button>
      </div>
     <div id="newUserForm">
     </div>
    </div>
  </div>
</div>





<!-- Modal -->
<div class="modal fade" id="showUserModal" tabindex="-1" aria-labelledby="showUserModalLabel" 
   aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="showUserModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"
         aria-label="Close"></button>
      </div>
     <div id="showUser">
     </div>
    </div>
  </div>
</div>


</div>
